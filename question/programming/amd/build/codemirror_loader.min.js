function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}define("qtype_programming/codemirror_loader",[],(function(){function loadCodeMirrorFiles(){var baseurl=M.cfg.wwwroot+"/question/type/programming/thirdparty/codemirror",scripts=[baseurl+"/lib/codemirror.js",baseurl+"/mode/clike/clike.js",baseurl+"/mode/python/python.js",baseurl+"/mode/pascal/pascal.js",baseurl+"/mode/perl/perl.js",baseurl+"/mode/gas/gas.js",baseurl+"/mode/shell/shell.js",baseurl+"/mode/brainfuck/brainfuck.js"],savedDefine=window.define,savedModule=window.module;return function(){try{window.define=void 0}catch(e){}try{window.module=void 0}catch(e){}var chain=Promise.resolve();return scripts.forEach((function(u){chain=chain.then((function(){return url=u,new Promise((function(resolve,reject){var s=document.createElement("script");s.src=url,s.async=!1,s.onload=resolve,s.onerror=function(){reject(new Error("Erreur de chargement : "+url))},document.head.appendChild(s)}));var url}))})),chain}().finally((function(){if(void 0!==savedDefine)window.define=savedDefine;else try{delete window.define}catch(e){}if(void 0!==savedModule)window.module=savedModule;else try{delete window.module}catch(e){}}))}return{init:(fn=regeneratorRuntime.mark((function _callee(editorId,initialLanguage,initialTheme,toggleBtnId,languageSelectId){var langMap,textarea,currentTheme,cleanedLanguage,mode,editor,toggleBtn,select;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,loadCodeMirrorFiles();case 2:if("undefined"!=typeof CodeMirror){_context.next=4;break}return _context.abrupt("return");case 4:if(langMap={python2:"python",python3:"python",c:"text/x-csrc",c11:"text/x-csrc","c++03":"text/x-c++src","c++11":"text/x-c++src","c++14":"text/x-c++src","c++17":"text/x-c++src","c++20":"text/x-c++src",java8:"text/x-java",java:"text/x-java",pascal:"pascal",perl:"perl",brainfuck:"brainfuck",assemblyx86:"gas",assemblyx64:"gas",sed:"shell",text:"text/plain",default:"text/plain"},textarea=document.getElementById(editorId)){_context.next=8;break}return _context.abrupt("return");case 8:return currentTheme=initialTheme||"material-darker",cleanedLanguage=(initialLanguage||"").toLowerCase().replace(/\s+/g,""),mode=langMap[cleanedLanguage]||langMap.default,editor=CodeMirror.fromTextArea(textarea,{mode:mode,theme:currentTheme,lineNumbers:!0,indentUnit:4,tabSize:4,indentWithTabs:!1,matchBrackets:!0,autoCloseBrackets:!0,lineWrapping:!0}),toggleBtnId&&(toggleBtn=document.getElementById(toggleBtnId))&&toggleBtn.addEventListener("click",(function(){currentTheme="eclipse"===currentTheme?"material-darker":"eclipse",editor.setOption("theme",currentTheme)})),languageSelectId&&(select=document.getElementById(languageSelectId))&&select.addEventListener("change",(function(){var selectedLang=this.options[this.selectedIndex].text.toLowerCase().replace(/\s+/g,""),newMode=langMap[selectedLang]||langMap.default;editor.setOption("mode",newMode)})),window["codemirrorEditor_"+editorId]=editor,_context.abrupt("return",editor);case 16:case"end":return _context.stop()}}),_callee)})),_init=function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))},function(_x,_x2,_x3,_x4,_x5){return _init.apply(this,arguments)})};var fn,_init}));

//# sourceMappingURL=codemirror_loader.min.js.map