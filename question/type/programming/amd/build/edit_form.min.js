define("qtype_programming/edit_form",["core/ajax","core/str","core/config"],(function(Ajax,Str,Config){return{init:function(){document.addEventListener("DOMContentLoaded",(function(){var select=document.querySelector('[name="problemlist"]'),nameField=document.querySelector('[name="name"]'),codeField=document.querySelector('[name="problemcode"]'),nameFieldWrapper=document.querySelector('[id^="fitem_id_name"]'),problemIdField=document.querySelector('[name="problemid"]'),editorId="id_questiontext";nameFieldWrapper&&(nameFieldWrapper.style.display="none"),fetch(Config.wwwroot+"/question/type/programming/fetchproblems.php").then((function(response){return response.json()})).then((function(data){data.forEach((function(problem){var option=document.createElement("option");option.value=problem.code,option.textContent=problem.name,select.appendChild(option)}))})),select.addEventListener("change",(function(){var code=this.value;codeField.value=code,fetch(Config.wwwroot+"/question/type/programming/fetchproblem.php?code="+encodeURIComponent(code)).then((function(response){return response.json()})).then((function(data){nameField&&(nameField.value=data.name||""),codeField&&(codeField.value=data.code||""),problemIdField&&(problemIdField.value=data.id||"");var description=data.description||"";"undefined"!=typeof tinyMCE&&tinyMCE.get(editorId)&&tinyMCE.get(editorId).setContent(description),"undefined"!=typeof Y&&Y.one("#"+editorId+"_editable")&&Y.one("#"+editorId+"_editable").setHTML(description);var rawTextarea=document.getElementById(editorId);rawTextarea&&(rawTextarea.value=description)}))}))}))}}}));

//# sourceMappingURL=edit_form.min.js.map